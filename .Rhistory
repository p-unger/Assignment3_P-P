table(z$keepinghousekid, z$sex)
library(ggplot2)
library(dplyr)
library(plyr)
library(repmis)
library(MASS)
library(Hmisc)
satjob.freq <- table(z$satjob)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
sat.freq <- table(z$happy)
barplot(sat.freq,
col=c("navyblue"),
xlab = "Overall life satisfaction categories",
legend = c("Life satisfaction"),
ylim = c(0, 20000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
save( z , file = "data_final.rda" )
if(!file.exists("data_final.rda")) {
source('GSS_prep_dynamic.R')
}
if(!exists("z.df" )) {
load("data_final.rda")
}
attach(z)
describe(z$year[sex==2 & educat==4])
describe(z$vhappy[sex==2 & educat==4])
describe(z$happy[sex==2 & educat==4])
describe(z$career[sex==2 & educat==4])
describe(z$married[sex==2 & educat==4])
describe(z$family[sex==2 & educat==4])
describe(z$careermarried[sex==2 & educat==4])
describe(z$careerfamily[sex==2 & educat==4])
describe(z$age[sex==2 & educat==4])
table(race[sex==2 & educat==4])
table(cohort[sex==2 & educat==4])
table(z$career, z$sex)
table(z$careerkid, z$sex)
table(z$careerfamily, z$sex)
table(z$careermarried, z$sex)
table(z$keepinghousekid, z$sex)
setwd("~/Documents/CDA/collaborative_projects/Assignment3_P-P") # Unger
# Source PCE deflator
source('deflator.R')
# Source CPS income percentile data from Bertrand (2013)'s replication file
# The file is only downloaded if not already present in working directory
if(!file.exists("CPS_Bertrand.rda")) {
source('CPS_Bertrand.R')
}
# Opens CPS_Bertrand.rda if the previous step was skipped (to save computational power)
if(!exists("CPS.df" )) {
load("CPS_Bertrand.rda")
}
# Source GSS downloader file if the dataset is not present on in the working directory
if(!file.exists("GSS.CS.rda")) {
source('GSS_data_downloader.R')
}
# Open the GSS dataset if previous step was skipped, otherwise not to save computational power
if(!exists("GSS.CS.df" )) {
load("GSS.CS.rda")
}
# Data-transformations
# The data transformations require substantial computational power. Thus after first
# run it creates the file: "data_final.dta". The code below sources the transformations
# only if it hasn't been done priorly.
if(!file.exists("data_final.rda")) {
source('GSS_prep_dynamic.R')
}
# Opens data_final.rda if not already loaded as an object
if(!exists("z.df" )) {
load("data_final.rda")
}
setwd("~/Documents/CDA/collaborative_projects/Assignment3_P-P") # Unger
if(!file.exists("data_final.rda")) {
source('GSS_prep_dynamic.R')
}
if(!exists("z.df" )) {
load("data_final.rda")
}
setwd("~/Documents/CDA/collaborative_projects/Assignment3_P-P")
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = "bottom" c("Job satisfaction"),
ylim = c(0, 15000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend.text = TRUE,
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
satjob.freq <- table(z$satjob)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend.text = TRUE,
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
if(!exists("z.df" )) {
load("data_final.rda")
}
satjob.freq <- table(z$satjob)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend.text = TRUE,
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
par(xpd=TRUE),
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
sat.freq <- table(z$happy)
barplot(sat.freq,
col=c("navyblue"),
xlab = "Overall life satisfaction categories",
legend = c("Life satisfaction"),
ylim = c(0, 20000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfaction"),
ylim = c(0, 15000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfaction"),
ylim = c(0, 17000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
ylim = c(0, 17000)
)
legend("bottom", legend = c("Job satisfaction"))
par(xpd=TRUE)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfaction"),
ylim = c(0, 17000)
)
par(xpd=TRUE)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend =
ylim = c(0, 17000)
)
legend(2.8,-1,c("Job satisfaction"), pch = c(1,2), lty = c(1,2))
legend(c("Job satisfaction"), pch = c(1,2), lty = c(1,2))
par(xpd=TRUE)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend =
ylim = c(0, 17000)
)
legend(c("Job satisfaction"), pch = c(1,2), lty = c(1,2))
par(xpd=TRUE)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
ylim = c(0, 17000)
)
legend(c("Job satisfaction"), pch = c(1,2), lty = c(1,2))
par(xpd=TRUE)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
ylim = c(0, 17000)
)
legend(2.8,-1,c("Job satisfaction"), pch = c(1,2), lty = c(1,2))
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfcation")
ylim = c(0, 17000)
)
barplot(satjob.freq,
col=c("navyblue"),
xlab = "Job satisfaction categories",
legend = c("Job satisfcation"),
ylim = c(0, 17000)
)
hist(z$hrs1,
col=c("navyblue"),
border = "White",
xlab = "Hours worked last week"
)
hist(z$hrs1[z$working_ft==1],
col=c("navyblue"),
border = "White",
xlab = "Hours worked last week (full-time employees)"
)
ggplot(t, aes(x=factor(year), y=vhappy)) +
stat_summary(fun.y="mean", geom="point", col="Navyblue") +
expand_limits(y=c(0.2,0.45)) +
theme_bw()
z$vhappy1 <- as.numeric(z$vhappy)
ggplot(t, aes(x=factor(year), y=vhappy1)) +
stat_summary(fun.y="mean", geom="point", col="Navyblue") +
expand_limits(y=c(0.2,0.45)) +
theme_bw()
t <- z
ggplot(t, aes(x=factor(year), y=vhappy)) +
stat_summary(fun.y="mean", geom="point", col="Navyblue") +
expand_limits(y=c(0.2,0.45)) +
theme_bw()
ggplot() +
stat_summary(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
ggplot(na.omit(t)) +
stat_summary(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
t <- r[!is.na(r$age)]
t <- z[!is.na(z$age)]
t <- z[!is.na(z$age),]
ggplot() +
stat_summary(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
ggplot(na.omit(t)) +
stat_summary(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
ggplot() +
stat_summary(na.omit(t$age), data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(na.omit(t$age), data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
ggplot() +
stat_summary(na.omit(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue")
)
ggplot() +
stat_summary(na.omit(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue"))
ggplot() +
stat_summary(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
ggplot() +
stat_summary(data = na.omit(t[t$sex == 1 & educat == 4,]), aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue"))
ggplot() +
stat_summary(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
library(ggplot2)
ggplot() +
stat_summary(data = z[z$sex == 1,], aes(x=factor(career), y=vhappy),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = z[z$sex == 2,], aes(x=factor(career), y=vhappy),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.25,0.4)) +
theme_bw()
z$working_ft <- as.numeric(z$working_ft)
z$working_pt <- as.numeric(z$working_pt)
M1a <- lm(vhappy ~ career*married + age + agesq + as.factor(year) + as.factor(race) + as.factor(bdec),
data = subset(z, sex==2 & educat == 4))
summary(M1a)
table(z$jobsat)
table(z$satjob)
t <- z
table(t$satjob)
t$ujobsat <- t$satjob == 1 | t$satjob == 2 | t$satjob == 3
table(t$ujobsat)
t$ujobsat <- as.numeric(t$ujobsat)
t$ujobsat2 <- t$satjob == 1 | t$satjob == 2
t$ujobsat1 <- as.numeric(t$ujobsat)
t$ujobsat1 <- t$satjob == 1 | t$satjob == 2 | t$satjob == 3
t$ujobsat2 <- t$satjob == 1 | t$satjob == 2
t$ujobsat1 <- as.numeric(t$ujobsat)
t$ujobsat2 <- as.numeric(t$ujobsat2)
table(t$ujobsat2)
R1 <- lm(ujobsat1 ~ sex
data = subset(t, vhappy == 1))
summary(R1)
t$d_sex <- t$sex == 1
table(t$d_sex)
table(t$sex)
t$d_sex <- as.numeric(t_sex)
t$d_sex <- as.numeric(t$d_sex)
table(t$d_sex)
R1 <- lm(ujobsat1 ~ d_sex,
data = subset(t, vhappy == 1))
summary(R1)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq,
data = subset(t, vhappy == 1))
summary(R1)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
if(!file.exists("data_final.rda")) {
source('data_combine.R')
}
# Opens data_final.rda if not already loaded as an object
if(!exists("z.df" )) {
load("data_final.rda")
}
t <- z
ggplot() +
stat_summary(data = t[t$sex == 1 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Navyblue") +
stat_summary(data = t[t$sex == 2 & educat == 4,], aes(x=factor(age), y=vhappy1),
fun.y="mean", geom="point", col="Red") +
expand_limits(y=c(0.2,0.6)) +
theme_bw()
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1 + lrinc,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
t$ujobsat1 <- t$satjob == 1 | t$satjob == 2 | t$satjob == 3
t$ujobsat2 <- t$satjob == 1 | t$satjob == 2
t$d_sex <- t$sex == 1
t$d_sex <- as.numeric(t$d_sex)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1 + lrinc,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
table(t$career)
table(t$career[year == 2012])
table(t$career[year == 2014])
table(t$career[year == 2010])
l <- lm(happy ~ jobsat, data = t)
summary(l)
l <- lm(vhappy ~ jobsat, data = t)
summary(l)
l <- lm(vhappy ~ ujobsat1, data = t)
summary(l)
t$jobsat1 <- as.numeric(t$satjob == 1)
t$jobsat2 <- as.numeric(t$satjob == 2)
t$jobsat1 <- as.numeric(t$satjob == 1)
t$jobsat2 <- as.numeric(t$satjob == 2)
t$jobsat3 <- as.numeric(t$satjob == 3)
t$jobsat4 <- as.numeric(t$satjob == 4)
l <- lm(vhappy ~ satjob2 satjob3 satjob4, data = t)
summary(l)
l <- lm(vhappy ~ satjob2 + satjob3 + satjob4, data = t)
summary(l)
l <- lm(vhappy ~ jobsat2 + jobsat3 + jobsat4, data = t)
summary(l)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1 + lrinc,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1 + lrinc + as.factor(occ80),
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1 + lrinc + family + as.factor(occ80),
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1 + def_lrinc + def_lothinc + family + as.factor(occ80),
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
R1 <- lm(ujobsat1 ~ d_sex + age + agesq + hrs1 + def_lrinc + def_lothinc + family +
as.factor(year) + as.factor(occ80),
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R1)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + def_lothinc + family,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
describe(t$def_linc)
debugSource('~/Documents/CDA/collaborative_projects/Assignment3_P-P/GSS_graphics.R', echo=TRUE)
describe(t$ujobsat1)
describe(t$ujobsat1)
describe(t$ujobsat1)
describe(t$ujobsat1)
t$ujobsat1 <- as.numeric(t$ujobsat1)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + def_lothinc + family,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + lrinc,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family + as.factor(occ80),
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family + age + agesq + hrs1 + as.factor(occ80),
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family + age + agesq + hrs1 + as.factor(occ80) + as.factor(year),
data = subset(t, vhappy == 1 & working_ft == 1 & year >= 1977 & year < 2011))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family + age + agesq + hrs1 + as.factor(occ80) + as.factor(year),
data = subset(t, vhappy == 1 & working_ft == 1 & educat == 4 & year >= 1977 & year < 2011))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family + age + agesq + as.factor(year),
data = subset(t, vhappy == 1 & working_ft == 1 & educat == 4 & year >= 1977 & year < 2011))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family + age + agesq + as.factor(year),
data = subset(t, vhappy == 1 & working_ft == 1 & educat == 4 ))
summary(R2)
R3 <- lm(vhappy ~ d_sex, data = t)
summary(R3)
describe(vhappy)
R2 <- lm(ujobsat1 ~ d_sex + def_lrinc + family + age + agesq,
data = subset(t, vhappy == 1 & working_ft == 1 & educat == 4 ))
summary(R2)
R2 <- lm(ujobsat1 ~ d_sex,
data = subset(t, vhappy == 1 & working_ft == 1 & educat == 4 ))
summary(R2)
R2 <- lm(vhappy ~ d_sex,
data = subset(t, working_ft == 1 & educat == 4 ))
summary(R2)
describe(t$ujobsat1)
table(t$ujobsat1)
R3 <- lm(ujobsat1 ~ d_sex, data = t)
summary(R3)
R3 <- lm(ujobsat1 ~ d_sex, data = subset(t, vhappy == 1)
summary(R3)
R3 <- lm(ujobsat1 ~ d_sex, data = subset(t, vhappy == 1))
summary(R3)
R3 <- lm(ujobsat1 ~ d_sex, data = subset(t, vhappy == 1 & working_ft == 1))
summary(R3)
R3 <- lm(ujobsat1 ~ d_sex, data = subset(t, vhappy == 1 & working_ft == 1 & educat == 4))
summary(R3)
R3 <- lm(ujobsat1 ~ d_sex + family,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R3)
R3 <- lm(ujobsat1 ~ d_sex + family + def_linc + def_othinc,
data = subset(t, vhappy == 1 & working_ft == 1))
summary(R3)
R3 <- lm(vhappy ~ d_sex + family + def_linc + def_othinc,
data = subset(t, ujobsat1 == 0 & working_ft == 1))
summary(R3)
R3 <- lm(vhappy ~ d_sex + family + career + def_linc + def_othinc,
data = subset(t, ujobsat1 == 0 & working_ft == 1))
summary(R3)
R3 <- lm(vhappy ~ d_sex + family + career + def_linc + def_othinc,
data = subset(t, ujobsat1 == 0)
summary(R3)
R3 <- lm(vhappy ~ d_sex + family + career + def_linc + def_othinc,
data = subset(t, ujobsat1 == 0))
summary(R3)
describe(t$vhappy)
table(t$vhappy)
table(z$happy)
z$vhappy <- z$happy==3
z$vhappy <- as.numeric(z$vhappy)
R3 <- lm(vhappy ~ d_sex + family + career + def_linc + def_othinc,
data = subset(t, ujobsat1 == 0))
summary(R3)
t$vhappy <- z$happy==3
t$vhappy <- as.numeric(z$vhappy)
R3 <- lm(vhappy ~ d_sex + family + career + def_linc + def_othinc,
data = subset(t, ujobsat1 == 0))
summary(R3)
R3 <- lm(vhappy ~ d_sex + family + def_linc + def_othinc + as.factor(occ80),
data = subset(t, ujobsat1 == 0 & year >= 1977 & year < 2011))
summary(R3)
R3 <- lm(vhappy ~ d_sex + family + hrs1 +  def_linc + def_othinc + as.factor(occ80),
data = subset(t, ujobsat1 == 0 & year >= 1977 & year < 2011))
summary(R3)
if(!exists("z.df" )) {
load("data_final.rda")
}
setwd("~/Documents/CDA/collaborative_projects/Assignment3_P-P")
